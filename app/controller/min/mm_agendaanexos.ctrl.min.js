var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(e,a){var o;function n(o,n){empresa=e.empresa,a.post("modulos/mod_mm_agendaanexos.php?op=r",{op:"r",empresa:empresa,comite:o,agenda:n}).success(function(a){e.details=a})}e.form_title="Documentos anexados al acta",e.form_btnNuevo="Nuevo registro",e.form_btnEdita="Edita",e.form_btnElimina="Elimina",e.form_btnAnula="Cerrar",e.form_btnActualiza="Actualizar",e.form_titModal="Actualiza lista de registros",e.form_Phbusca="Consulta",e.form_btnCarga="Cargarlo",e.form_anexos_id="ID",e.form_agenda_comiteId="COMITE",e.form_anexos_acta_id="ACTA",e.form_anexos_anexo="ANEXO",e.form_anexos_descripcion="DESCRIPCION",e.form_Phanexos_id="Digite id",e.form_Phanexos_comiteid="Digite comiteid",e.form_Phanexos_agendaid="Digite agendaid",e.form_Phanexos_anexo="Digite anexo",e.form_Phanexos_descripcion="Digite descripcion del anexo a cargar",e.form_btnRecarga="Recarga lista",e.CargaDocumento="Carga Documento",e.registro={},e.agendaId=0,e.comiteId=0,e.empresa=$("#e").val(),e.ruedita=!1,e.btnCarga=!0,e.btnActualiza=!1,e.btnReCarga=!1,e.registro.dibujo="C",o=$("#u").val(),empresa=e.empresa=$("#e").val(),a.post("modulos/mod_mm_agendaanexos.php?op=0",{op:"0",empresa:empresa,user:o}).success(function(a){e.operators0=a}),e.datosOcultos=!1,e.updateComite=function(){empresa=e.empresa=$("#e").val(),e.comiteId=e.registro.agenda_comiteId,e.registro.comiteId=e.comiteId,a.post("modulos/mod_mm_agendaanexos.php?op=1",{op:"1",comite:e.comiteId,empresa:empresa}).success(function(a){e.operators1=a})},e.comiteSeleccionado=function(){e.btnActualiza=!1,e.agendaId=e.registro.agenda_id,e.registro.actaId=e.agendaId,a.post("modulos/mod_mm_agendaanexos.php?op=fch",{op:"fch",agenda:e.agendaId}).success(function(o){e.registro.anno=o,empresa=e.empresa,a.post("modulos/mod_mm_agendaanexos.php?op=r",{op:"r",empresa:empresa,comite:e.comiteId,agenda:e.agendaId}).success(function(a){e.details=a}),n(e.comiteId,e.agendaId)})},e.botonOk=function(){e.btnCarga=!0,e.ruedita=!0},e.recarga=function(){e.btnActualiza=!0,n(e.comiteId,e.agendaId)},e.actualizaLista=function(){$("#btnReCarga").hide(),$("#message").val(""),e.btnActualiza=!1,empresa=e.empresa,a.post("modulos/mod_mm_agendaanexos.php?op=r",{op:"r",empresa:empresa,comite:e.comiteId,agenda:e.agendaId}).success(function(a){e.details=a})},e.leeDatosComite=function(a){e.comiteId=a.agenda_id,alert("leer datos de ".$scope.comiteId)},e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.anexos_id=0,$("#idForm").css("display","none")},e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.formato.$setPristine(),e.registro=angular.copy(defaultForm)},e.verPdf=function(e){},e.deleteInfo=function(o){confirm("Desea borrar el registro con nombre : "+o.anexos_anexo+" ?")&&(comite=o.anexos_comiteid,agenda=o.anexos_agendaid,a.post("modulos/mod_mm_agendaanexos.php?op=b",{op:"b",anexos_id:o.anexos_id}).success(function(o){msg="Ok"===o?"Registro Borrado ":"El archivo f√≠sico ya no existe en la carpeta ",empresa=e.empresa,a.post("modulos/mod_mm_agendaanexos.php?op=r",{op:"r",empresa:empresa,comite:comite,agenda:agenda}).success(function(a){e.details=a,alert(msg)})}))}}]);